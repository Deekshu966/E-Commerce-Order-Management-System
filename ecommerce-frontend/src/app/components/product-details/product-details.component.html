<div class="product-details-container">
  <div class="container">
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
      <a routerLink="/home">Home</a>
      <span>/</span>
      <a routerLink="/products">Products</a>
      <span>/</span>
      <span class="current">{{ product?.name }}</span>
    </nav>

    <!-- Loading -->
    <div class="loading" *ngIf="isLoading">
      <div class="spinner"></div>
    </div>

    <!-- Product Details -->
    <div class="product-details" *ngIf="!isLoading && product">
      <div class="product-gallery">
        <div class="main-image">
          <img [src]="product.image" [alt]="product.name" />
        </div>
      </div>

      <div class="product-info">
        <h1>{{ product.name }}</h1>
        
        <div class="price-section">
          <span class="price">${{ product.price.toFixed(2) }}</span>
        </div>

        <div class="stock-info" [class.in-stock]="product.stock > 0" [class.out-of-stock]="product.stock === 0">
          <span *ngIf="product.stock > 10">✓ In Stock</span>
          <span *ngIf="product.stock > 0 && product.stock <= 10">⚠ Only {{ product.stock }} left in stock</span>
          <span *ngIf="product.stock === 0">✗ Out of Stock</span>
        </div>

        <div class="description">
          <h3>Description</h3>
          <p>{{ product.description }}</p>
        </div>

        <div class="quantity-section" *ngIf="product.stock > 0">
          <label>Quantity:</label>
          <div class="quantity-input">
            <button (click)="decrementQuantity()" [disabled]="quantity <= 1">-</button>
            <input type="number" [(ngModel)]="quantity" min="1" [max]="product.stock" readonly />
            <button (click)="incrementQuantity()" [disabled]="quantity >= product.stock">+</button>
          </div>
        </div>

        <div class="action-buttons" *ngIf="product.stock > 0">
          <button 
            class="btn btn-primary btn-lg"
            (click)="addToCart()"
          >
            {{ addedToCart ? '✓ Added to Cart!' : 'Add to Cart' }}
          </button>
          <button 
            class="btn btn-secondary btn-lg"
            (click)="buyNow()"
          >
            Buy Now
          </button>
        </div>

        <div class="action-buttons" *ngIf="product.stock === 0">
          <button class="btn btn-outline btn-lg" disabled>
            Out of Stock
          </button>
        </div>

        <div class="cart-link" *ngIf="isInCart()">
          <a routerLink="/cart">View Cart →</a>
        </div>
      </div>
    </div>
  </div>
</div>
